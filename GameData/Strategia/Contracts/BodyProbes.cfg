// Contract for moon and planet probes.
//   Author: nightingale

CONTRACT_TYPE
{
    name = STG_BodyProbes
    group = Strategia

    title = Strategia: @strategy
    description = @strategy.description()
    synopsis = @strategy.synopsis()
    completedMessage = @strategy.completedMessage()

    agent = Strategia

    targetBody = @strategy.targetBody()

    autoAccept = true
    cancellable = false

    maxSimultaneous = 1

    prestige = Exceptional

    // Contract rewards
    advanceFunds = @strategy.advanceFunds() / ContractMultiplier()
    rewardFunds = @strategy.rewardFunds() / ContractMultiplier()
    rewardReputation = @strategy.rewardReputation() / ContractMultiplier()
    failureReputation = @strategy.failureReputation() / ContractMultiplier()
    failureFunds = @strategy.failureFunds() / ContractMultiplier()

    DATA
    {
        type = StrategiaStrategy
        requiredValue = true

        strategy = ActiveStrategies().Where(s => s.contractType() == @name).First()
    }

    DATA
    {
        type = List<Biome>
        biomes = @targetBody.Biomes()
    }

    PARAMETER
    {
        type = AtLeast

        count = 3
        title = Land probes in THREE different biomes on @/targetBody

        PARAMETER
        {
            type = ReachState

            title = @biome.Name()

            targetBody = @/targetBody
            biome = @/biomes.ElementAt(0)
            situation = @biome.PrimarySituation()
            disableOnStateChange = true
            hideChildren = true
        }

        PARAMETER
        {
            type = ReachState

            title = @biome.Name()

            targetBody = @/targetBody
            biome = @/biomes.ElementAt(1)
            situation = @biome.PrimarySituation()
            disableOnStateChange = true
            hideChildren = true
        }

        PARAMETER
        {
            type = ReachState

            title = @biome.Name()

            targetBody = @/targetBody
            biome = @/biomes.ElementAt(2)
            situation = @biome.PrimarySituation()
            disableOnStateChange = true
            hideChildren = true
        }

        PARAMETER
        {
            type = ReachState

            title = @biome.Name()

            targetBody = @/targetBody
            biome = @/biomes.ElementAt(3)
            situation = @biome.PrimarySituation()
            disableOnStateChange = true
            hideChildren = true

            REQUIREMENT
            {
                type = Expression
                expression = @/biomes.Count() > 3
            }
        }

        PARAMETER
        {
            type = ReachState

            title = @biome.Name()

            targetBody = @/targetBody
            biome = @/biomes.ElementAt(4)
            situation = @biome.PrimarySituation()
            disableOnStateChange = true
            hideChildren = true

            REQUIREMENT
            {
                type = Expression
                expression = @/biomes.Count() > 4
            }
        }

        PARAMETER
        {
            type = ReachState

            title = @biome.Name()

            targetBody = @/targetBody
            biome = @/biomes.ElementAt(5)
            situation = @biome.PrimarySituation()
            disableOnStateChange = true
            hideChildren = true

            REQUIREMENT
            {
                type = Expression
                expression = @/biomes.Count() > 5
            }
        }

        PARAMETER
        {
            type = ReachState

            title = @biome.Name()

            targetBody = @/targetBody
            biome = @/biomes.ElementAt(6)
            situation = @biome.PrimarySituation()
            disableOnStateChange = true
            hideChildren = true

            REQUIREMENT
            {
                type = Expression
                expression = @/biomes.Count() > 6
            }
        }

        PARAMETER
        {
            type = ReachState

            title = @biome.Name()

            targetBody = @/targetBody
            biome = @/biomes.ElementAt(7)
            situation = @biome.PrimarySituation()
            disableOnStateChange = true
            hideChildren = true

            REQUIREMENT
            {
                type = Expression
                expression = @/biomes.Count() > 7
            }
        }

        PARAMETER
        {
            type = ReachState

            title = @biome.Name()

            targetBody = @/targetBody
            biome = @/biomes.ElementAt(8)
            situation = @biome.PrimarySituation()
            disableOnStateChange = true
            hideChildren = true

            REQUIREMENT
            {
                type = Expression
                expression = @/biomes.Count() > 8
            }
        }

        PARAMETER
        {
            type = ReachState

            title = @biome.Name()

            targetBody = @/targetBody
            biome = @/biomes.ElementAt(9)
            situation = @biome.PrimarySituation()
            disableOnStateChange = true
            hideChildren = true

            REQUIREMENT
            {
                type = Expression
                expression = @/biomes.Count() > 9
            }
        }

        PARAMETER
        {
            type = ReachState

            title = @biome.Name()

            targetBody = @/targetBody
            biome = @/biomes.ElementAt(10)
            situation = @biome.PrimarySituation()
            disableOnStateChange = true
            hideChildren = true

            REQUIREMENT
            {
                type = Expression
                expression = @/biomes.Count() > 10
            }
        }

        PARAMETER
        {
            type = ReachState

            title = @biome.Name()

            targetBody = @/targetBody
            biome = @/biomes.ElementAt(11)
            situation = @biome.PrimarySituation()
            disableOnStateChange = true
            hideChildren = true

            REQUIREMENT
            {
                type = Expression
                expression = @/biomes.Count() > 11
            }
        }

        PARAMETER
        {
            type = ReachState

            title = @biome.Name()

            targetBody = @/targetBody
            biome = @/biomes.ElementAt(12)
            situation = @biome.PrimarySituation()
            disableOnStateChange = true
            hideChildren = true

            REQUIREMENT
            {
                type = Expression
                expression = @/biomes.Count() > 12
            }
        }

        PARAMETER
        {
            type = ReachState

            title = @biome.Name()

            targetBody = @/targetBody
            biome = @/biomes.ElementAt(13)
            situation = @biome.PrimarySituation()
            disableOnStateChange = true
            hideChildren = true

            REQUIREMENT
            {
                type = Expression
                expression = @/biomes.Count() > 13
            }
        }

        PARAMETER
        {
            type = ReachState

            title = @biome.Name()

            targetBody = @/targetBody
            biome = @/biomes.ElementAt(14)
            situation = @biome.PrimarySituation()
            disableOnStateChange = true
            hideChildren = true

            REQUIREMENT
            {
                type = Expression
                expression = @/biomes.Count() > 14
            }
        }
    }


    PARAMETER
    {
        type = Timer
        duration = @/strategy.duration()
    }
}
